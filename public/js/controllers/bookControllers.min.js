app.controller("nextBookController",["$http","bookSvc","$scope",function(a,b,c){var d=this;d.getNextBook=function(){a.get("/api/book/next").success(function(a){d.next_book=a.book})},d.edit=function(a){b.edit(a)},d.read=function(a){b.markAsRead(a)},c.$on("BOOK_READ",function(){d.getNextBook()}),d.getNextBook()}]),app.controller("editBookController",["$http","bookSvc","$scope",function(a,b,c){var d=this;d.book=b.create(),a.get("/api/book/categories").success(function(a){d.categories=a.categories}),c.$on("EDITING_BOOK",function(){d.book=b.get()}),d.save=function(){d.book.read||(d.book.read=!1),d.book.seriesorder||(d.book.seriesorder=0),a({method:"PUT",url:"/api/book/",data:d.book}).success(function(a){a.success?($("#bookModal").modal("hide"),$("#book-error").addClass("hidden")):($("#book-error").html(a.error),$("#book-error").removeClass("hidden"))})},d.edit=function(a){b.edit(a)},d.create=function(){b.edit(b.create())}}]);