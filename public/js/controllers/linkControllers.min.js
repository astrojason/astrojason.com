app.controller("todaysLinksController",["$http","linkSvc","$scope",function(a,b,c){var d=this;d.editing=null,d.init=!0,a.get("/api/links/today").success(function(a){d.success=a.success,d.success?(d.athome=a.athome,d.cooking=a.cooking,d.exercise=a.exercise,d.forreview=a.forreview,d.forthehouse=a.forthehouse,d.guitar=a.guitar,d.groups=a.groups,d.photography=a.photography,d.projects=a.projects,d.programming=a.programming,d.wishlist=a.wishlist,d.wordpress=a.wordpress,d.unread=a.links,d.daily=a.daily,d.hockeyexercise=a.hockeyexercise,d.read=a.total_read,d.added=a.total_added):d.error=a.error,d.init=!1}),d.refreshCategory=function(b,c){a.get("/api/links/"+b+"/"+c).success(function(a){var c=b.toLowerCase().replace(/ /g,"");d[c]=a.links})},d.postpone=function(a,c){b.postpone(a,c,d)},d.markAsRead=function(a,c){d.editing={link:a,index:c},b.markAsRead(a)},d.edit=function(a,c){d.editing={link:a,index:c,category:a.category},b.edit(a)},c.$on("LINK_READ",function(){null!=d.editing&&(d.read++,b.remove(d.editing.link.category,d.editing.index,d),d.editing=null)}),c.$on("LINK_EDITED",function(){null!=d.editing&&d.editing.link.category!=d.editing.category&&b.remove(d.editing.category,d.editing.index,d),d.editing=null})}]),app.controller("editLinkController",["$http","linkSvc","$scope","$rootScope",function(a,b,c,d){var e=this;a.get("/api/link/categories").success(function(a){e.categories=a.categories}),c.$on("EDITING_LINK",function(){e.link=b.get()}),e.create=function(){b.edit(b.create())},e.save=function(){a({method:"PUT",url:"/api/link/",data:e.link}).success(function(a){a.success?($("#linkModal").modal("hide"),d.$broadcast("LINK_EDITED")):($("#link-error").html(a.error),$("#link-error").show())})}}]),app.controller("allLinksController",["$http","linkSvc","$scope",function(a,b,c){var d=this;c.$watch("filter",function(){c.filter.length>2&&a.get("/api/links/"+c.filter,function(a){d.links=a})}),d.edit=function(a,c){d.editing={link:a,index:c},b.edit(a)},d.markAsRead=function(a,c){d.editing={link:a,index:c},b.markAsRead(a)},c.$on("LINK_READ",function(){null!=d.editing&&(d.editing.link.read=!0,d.editing=null)})}]);