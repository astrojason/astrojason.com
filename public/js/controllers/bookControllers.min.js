app.controller("nextBookController",["$http","bookSvc","$scope",function(a,b,c){var d=this;d.getNextBook=function(){a.get("/api/book/next").success(function(a){d.next_book=a.book})},d.edit=function(a){b.edit(a)},d.read=function(a){b.markAsRead(a)},c.$on("BOOK_READ",function(){d.getNextBook()}),d.getNextBook()}]),app.controller("editBookController",["$http","bookSvc","$scope",function(a,b,c){var d=this;d.book=b.create(),a.get("/api/book/categories").success(function(a){d.categories=a.categories}),c.$on("EDITING_BOOK",function(){d.book=b.get()}),d.save=function(){d.book.read||(d.book.read=!1),d.book.seriesorder||(d.book.seriesorder=0),a({method:"PUT",url:"/api/book/",data:d.book}).success(function(a){a.success?($("#bookModal").modal("hide"),$("#book-error").addClass("hidden")):($("#book-error").html(a.error),$("#book-error").removeClass("hidden"))})},d.edit=function(a){b.edit(a)},d.create=function(){b.edit(b.create())}}]),app.controller("allBooksController",["$http","bookSvc","$scope",function(a,b,c){var d=this;d.editing=null,a.get("/api/books").success(function(a){d.books=a.books,d.sortOrder="title"}),d.edit=function(a){d.editing=a,b.edit(a)},d.markAsRead=function(a){d.editing=a,b.markAsRead(a)},d.delete=function(b){a.get("/api/book/"+b.id+"/delete").success(function(a){a.success&&d.books.splice(d.books.indexOf(b),1)})},c.$on("BOOK_READ",function(){null!=d.editing&&(d.editing.read=!0,d.editing=null)})}]);