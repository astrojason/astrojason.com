(function(){window.app.controller("AdminController",["$scope","$http",function(a,b){return a.migrateLinks=function(){var c;return c=b.get("http://astrojason.herokuapp.com/api/links"),c.success(function(b){var c;return c="",angular.forEach(b.links,function(b){var d;return c+="Link::create(array('name' => \""+a.stripChars(b.name)+"\", 'link' => \""+b.link+"\", 'is_read' => "+(null!=(d=b.read)?d:{1:0})+", 'category' => \""+b.category+"\", 'user_id' => 1",b.instapaper_id&&(c+=", 'instapaper_id' => "+b.instapaper_id),c+="));\n"}),a.importSql=c})},a.stripChars=function(a){var b;return b=[['"',""],[";",":"]],angular.forEach(b,function(b){var c;for(c=[];a.indexOf(b[0])>=0;)c.push(a=a.replace(b[0],b[1]));return c}),a}}])}).call(this),function(){window.app.controller("DashboardController",["$scope","$http","$location","$timeout",function(a,b,c,d){var e;return a.display_category=c.search().category||"Unread",a.search_timeout=null,a.$emit("initStarted"),a.$watch("display_category",function(b,c){return""!==c?a.getCategoryArticles():void 0}),a.$watch("search_query",function(b,c){return d.cancel(a.search_timeout),(null!=c?c.length:void 0)>=3?a.search_timeout=d(function(){return a.search_articles()},500):void 0}),a.$watch("is_read",function(){var b;return d.cancel(a.search_timeout),(null!=(b=a.search_query)?b.length:void 0)>=3?a.search_timeout=d(function(){return a.search_articles()},500):void 0}),a.getCategoryArticles=function(){var c;return a.$emit("initStarted"),c=b.get("/api/links/dashboard/"+a.display_category),c.success(function(b){return b.success?(a.$emit("initComplete"),a.selected_links=b.links):void 0})},a.search_articles=function(){var c,d;return a.$emit("initStarted"),a.search_results=[],c={q:a.search_query},a.is_read&&(c.include_read=!0),d=b.post("/api/links/search",$.param(c)),d.success(function(b){return a.$emit("initComplete"),b.success?a.search_results=b.links:void 0})},e=b.get("/api/links/dashboard"),e.success(function(b){return b.success?(a.$emit("initComplete"),a.daily_links=b.links,a.total_read=b.total_read):void 0})}])}.call(this),function(){window.app.controller("LinkController",["$scope","$http",function(a,b){return a.editing=!1,a.deleting=!1,a.linkOpened=function(){return console.log("Opened the link")},a.markAsRead=function(){var c;return c=b.post("/api/links/read/"+a.link.id),c.success(function(b){return b.success?(a.link.is_read=!0,a.$parent.total_read++):void 0})},a.markAsUnread=function(){var c;return c=b.post("/api/links/unread/"+a.link.id),c.success(function(b){return b.success?a.link.is_read=!1:void 0})},a["delete"]=function(){var c;return c=b.post("/api/links/delete/"+a.link.id),c.success(function(b){return b.success?a.link.deleted=!0:void 0})},a.save=function(){var c,d;return c=a.link,"new"===a.link.category&&(a.link.category=a.new_category),d=b.post("/api/links/save",$.param(c)),d.success(function(b){return b.success?(a.link.category===a.new_category&&a.categories.push(a.new_category),a.editing=!1):void 0}),d.error(function(){var b;return a.$emit("errorOccurred","Problem "+(null!=(b=a.link.id)?b:{updating:"adding"})+" link")})}}])}.call(this),function(){window.app.controller("MasterController",["$scope","$http",function(a,b){return a.initItems=0,a.$on("initStarted",function(){return a.init=!0,a.initItems++}),a.$on("initComplete",function(){return a.initItems--,0===a.initItems?a.init=!1:void 0}),a.$on("errorOccurred",function(b,c){return a.show_error=!0,a.error_message=c}),a.login=function(){var c,d;return a.init=!0,c={username:a.username,password:a.password},d=b.post("/api/login",$.param(c)),d.success(function(b){return a.init=!1,a.user=b.user})},a.logout=function(){var c;return a.init=!0,c=b.post("/api/logout"),c.success(function(){return a.init=!1,a.user=null})}}])}.call(this),function(){var a,b;b=document.getElementById("register_overlay"),a=new Spinner(spin_opts).spin(b),window.app.controller("UserController",["$scope","$http",function(a,b){return a.$on("checkingAvailibility",function(){return a.submitting=!0}),a.$on("checkedAvailibility",function(){return a.submitting=!1}),a.registerUser=function(){var c,d;return c={first_name:a.first_name,last_name:a.last_name,email:a.email,username:a.username,password:a.password},a.submitting=!0,d=b.post("/api/register",$.param(c)),d.success(function(a){return console.log(a)})}}])}.call(this);